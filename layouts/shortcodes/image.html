<div style="border: 2px solid red; padding: 10px; margin: 10px; background: #ffeeee; color: black; font-family: monospace; font-size: 14px;">
  <strong style="display: block; margin-bottom: 5px;">[Shortcode Debugger]</strong>
  <ul>
    <li><strong>Shortcode looking for:</strong> {{ printf "%s.avif" (.Get "src") }}</li>
    <li><strong>Available Resources in this Page Bundle:</strong>
      <ul>
        {{ if .Page.Resources }}
          {{ range .Page.Resources }}
            <li>{{ .Name }}</li>
          {{ end }}
        {{ else }}
          <li>-- No resources found --</li>
        {{ end }}
      </ul>
    </li>
  </ul>
</div>
{{/* --- 原始 shortcode 代码不变 --- */}}
{{ $src := .Get "src" }}
{{ $alt := .Get "alt" | default $src }}
{{ $class := .Get "class" }}
{{ $avifPath := printf "%s.avif" $src }}
{{ with .Page.Resources.GetMatch $avifPath }}
  <img src="{{ .RelPermalink }}" alt="{{ $alt }}" class="{{ $class }}" width="{{ .Width }}" height="{{ .Height }}" loading="lazy">
{{ else }}
  <p style="color: red;"><strong>Image Error:</strong> Could not find '{{ $avifPath }}' in this Page Bundle.</p>
{{ end }}
